---
description: How to run the dev server / dev build when the user asks to test, run, or build the app — always use full permissions
alwaysApply: false
---

# Dev Server

When the user asks to run the dev server, do a dev build, start a test, or run the app locally:

## Command

```bash
pnpm run tauri:dev
```

The `tauri:dev` script runs `scripts/tauri-dev.sh`, which sets `CARGO_HOME` to `.cargo-home/` (workspace) and unsets `CI`. This avoids Cursor sandbox blocking Cargo crate downloads.

Never run bare `pnpm tauri dev` — use `pnpm run tauri:dev`.

## Agent invocation

When running via run_terminal_cmd:
- **required_permissions: ["all"]** — always use full permissions so Cargo can download crates
- **is_background: true** — dev server is long-running; app window opens when build finishes

```bash
pnpm run tauri:dev
```

## Fallbacks

- **Web-only**: `pnpm dev` — Vite only; SQLite/native APIs won't work.
- **If agent run fails**: Tell user to run `pnpm run tauri:dev` in their own terminal.
