@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Light theme colors (default) - :root is the standard location for CSS variables */
  :root {
    --scripture-bg: #faf9f7;
    --scripture-surface: #ffffff;
    --scripture-elevated: #f5f4f2;
    --scripture-border: #e5e3e0;
    --scripture-text: #1a1a1a;
    --scripture-muted: #6b7280;
    --scripture-accent: #d97706;
    --scripture-accent-muted: #92400e;
  }

  /* Dark theme colors - override when .dark class is present on html */
  html.dark {
    --scripture-bg: #0f0f0f;
    --scripture-surface: #1a1a1a;
    --scripture-elevated: #252525;
    --scripture-border: #3a3a3a;
    --scripture-text: #e8e6e3;
    --scripture-muted: #9ca3af;
    --scripture-accent: #d97706;
    --scripture-accent-muted: #92400e;
  }

  * {
    -webkit-tap-highlight-color: transparent;
  }
  
  html {
    @apply antialiased;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    background-color: var(--scripture-bg);
    color: var(--scripture-text);
    font-family: var(--font-ui, 'DM Sans', system-ui, sans-serif);
    /* Safe area insets for iPad notch/home indicator */
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  }

  /* Scripture text styling */
  .scripture-text {
    @apply font-scripture leading-relaxed;
    letter-spacing: 0.01em;
  }

  /* Verse number styling */
  .verse-number {
    @apply text-scripture-accent font-ui text-sm mr-1.5 select-none;
    vertical-align: baseline;
    display: inline-block;
    font-size: 0.875em;
    line-height: inherit;
    font-weight: 600;
    opacity: 0.9;
  }

  /* Cross-reference styling */
  .cross-ref {
    @apply text-scripture-accent cursor-pointer hover:text-scripture-text transition-colors;
    font-size: 0.85em;
    font-weight: 600;
    vertical-align: super;
    margin: 0 0.15em;
    opacity: 0.7;
  }

  .cross-ref:hover {
    opacity: 1;
    text-decoration: underline;
  }

  /* Selection styling */
  ::selection {
    background-color: rgba(217, 119, 6, 0.3);
    color: var(--scripture-text);
  }

  /* Light theme selection */
  .light ::selection {
    background-color: rgba(217, 119, 6, 0.2);
    color: var(--scripture-text);
  }

  /* Dark theme selection */
  .dark ::selection {
    background-color: rgba(217, 119, 6, 0.3);
    color: var(--scripture-text);
  }
}

@layer components {
  /* Highlight classes for annotations */
  .highlight-red { @apply bg-highlight-red/30; }
  .highlight-orange { @apply bg-highlight-orange/30; }
  .highlight-amber { @apply bg-highlight-amber/30; }
  .highlight-yellow { @apply bg-highlight-yellow/30; }
  .highlight-lime { @apply bg-highlight-lime/30; }
  .highlight-green { @apply bg-highlight-green/30; }
  .highlight-teal { @apply bg-highlight-teal/30; }
  .highlight-cyan { @apply bg-highlight-cyan/30; }
  .highlight-blue { @apply bg-highlight-blue/30; }
  .highlight-indigo { @apply bg-highlight-indigo/30; }
  .highlight-purple { @apply bg-highlight-purple/30; }
  .highlight-pink { @apply bg-highlight-pink/30; }

  /* Text color classes */
  .text-color-red { @apply text-highlight-red; }
  .text-color-orange { @apply text-highlight-orange; }
  .text-color-amber { @apply text-highlight-amber; }
  .text-color-yellow { @apply text-highlight-yellow; }
  .text-color-lime { @apply text-highlight-lime; }
  .text-color-green { @apply text-highlight-green; }
  .text-color-teal { @apply text-highlight-teal; }
  .text-color-cyan { @apply text-highlight-cyan; }
  .text-color-blue { @apply text-highlight-blue; }
  .text-color-indigo { @apply text-highlight-indigo; }
  .text-color-purple { @apply text-highlight-purple; }
  .text-color-pink { @apply text-highlight-pink; }

  /* Scrollbar styling - adapts to theme via CSS variables */
  .custom-scrollbar::-webkit-scrollbar {
    @apply w-2;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    background-color: var(--scripture-bg);
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: var(--scripture-border);
    border-radius: 9999px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: var(--scripture-muted);
  }
}

@layer utilities {
  /* Touch-friendly tap targets */
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }

  /* Search overlay animation that preserves translateX(-50%) for centering */
  @keyframes searchScaleIn {
    0% {
      opacity: 0;
      transform: translateX(-50%) scale(0.95);
    }
    100% {
      opacity: 1;
      transform: translateX(-50%) scale(1);
    }
  }

  /* Error display fade-in animation */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fadeIn 0.2s ease-out;
  }

  /* Annotation remove button - appears on hover */
  .annotation-group {
    position: relative;
    display: inline-block;
  }

  .annotation-group:hover .annotation-remove {
    display: flex !important;
  }

  .annotation-remove {
    position: absolute;
    top: -6px;
    right: -6px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background-color: #ef4444;
    color: white;
    font-size: 12px;
    line-height: 1;
    display: none;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 20;
    border: 1px solid white;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    padding: 0;
    margin: 0;
  }

  .annotation-remove:hover {
    background-color: #dc2626;
  }
}
